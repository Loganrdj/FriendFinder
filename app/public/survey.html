<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
    <title>Survey</title>
</head>
<body>
    <div class="container">
        <form action="/survey/submit" method="POST">
            <h2>Survey Questions</h2>
            <hr class="my-4">
            <h3>About You</h3>
            <h5>Name (Required)</h5>
            <input class="form-control" type="text" id="name" required>
            <h5>Link to Photo Image (Required)</h5>
            <input class="form-control" type="text" id="photo" required>
            <hr class="my-4">
            <h3>Question 1</h3>
            <h4>Loyalty is the most important value to have</h4>
            <select class="chosen-select" id="question1" required>
                <option value="unanswered" label="Select an Option"></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>   
            </select>
            <h3>Question 2</h3>
            <h4>You recharge energy by talking and interacting with other people.</h4>
            <select class="chosen-select" id="question2" required>
                <option value="unanswered" label="Select an Option"></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>   
            </select>
            <h3>Question 3</h3>
            <h4>People can rarely upset you.</h4>
            <select class="chosen-select" id="question3" required>
                <option value="unanswered" label="Select an Option"></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>   
            </select>
            <h3>Question 4</h3>
            <h4>You see yourself as a laidback type of person.</h4>
            <select class="chosen-select" id="question4" required>
                <option value="unanswered" label="Select an Option"></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>   
            </select>
            <h3>Question 5</h3>
            <h4>It is very hard to offend you.</h4>
            <select class="chosen-select" id="question5" required>
                <option value="unanswered" label="Select an Option"></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>   
            </select>
            <h3>Question 6</h3>
            <h4>You worry often about whether or not you make good first impressions.</h4>
            <select class="chosen-select" id="question6" required>
                <option value="unanswered" label="Select an Option"></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>   
            </select>
            <h3>Question 7</h3>
            <h4>You pay attention to detail rather than see the big picture</h4>
            <select class="chosen-select" id="question7" required>
                <option value="unanswered" label="Select an Option"></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>   
            </select>
            <h3>Question 8</h3>
            <h4>You are not an affection person with people you care about.</h4>
            <select class="chosen-select" id="question8" required>
                <option value="unanswered" label="Select an Option"></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>   
            </select>
            <h3>Question 9</h3>
            <h4>Gifts are very important in order to show affection for another.</h4>
            <select class="chosen-select" id="question9" required>
                <option value="unanswered" label="Select an Option"></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>   
            </select>
            <h3>Question 10</h3>
            <h4>You can stay calm under a lot of pressure</h4>
            <select class="chosen-select" id="question10" required>
                <option value="unanswered" label="Select an Option"></option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>   
            </select>
            <br><br>
            <a class="btn btn-primary btn-lg" type="submit" id="submitbutton" role="button"> Submit </a>
        </form>
    </div>
    <div class="answerDiv"></div>
</body>
<script type="text/javascript">
    $("#submitbutton").on("click", function(){
        dataSend = {
            name: $("#name").val(),
            photo: $("#photo").val(),
            scores: 
                [
                    $("#question1").val(),
                    $("#question2").val(),
                    $("#question3").val(),
                    $("#question4").val(),
                    $("#question5").val(),
                    $("#question6").val(),
                    $("#question7").val(),
                    $("#question8").val(),
                    $("#question9").val(),
                    $("#question10").val()
                ]
        }

        for(let i = 0; i < dataSend.scores.length; i++){
            if (dataSend.scores[i] === "unanswered"){
                alert("Please answer all questions")
                console.log("Please answer all questions")
                throw err;
            }
        }

        $.post("/api/friends", dataSend, function(data){
            // console.log(dataSend)
            newDiv = `<div class="container">
                <img src=${data.photo}>
                <h1>${data.name}</h1>
                <h2>Closeness Score: ${data.closenessScore}</h2>
                </div>`
            $(".answerDiv").append(newDiv)
        })
    })
    
</script>
</html>